public class NSSales_AuthorityLaneInfoIP implements NS_WebService {
	public static string invokeCallout(NS_IntegParams datum){        
        String endpoint = NS_IntegrationUtility_WorkBench.ENDPOINT+'/renewal/lanes?bureau='+datum.getrenewalId().substringBefore(' ')+'&auth-num='+datum.getrenewalId().substringAfter(' ')+'&exp-date='+datum.getexpDate();              
        System.debug('Endpoint for Authority Lane Request:'+endpoint);
        HttpResponse hres = NS_WSCallout.sendRequestRest(endpoint, NS_IntegrationUtility_WorkBench.GET, NS_IntegrationUtility_WorkBench.CONTENTTYPE, null); 
        System.debug('Raw Lane Details' +hres.getBody());
        return responseParser(hres.getBody());
    }
    private static String responseParser(String rawResponse){
        system.debug('RawResponse' +rawResponse);
        NSSales_AuthorityLaneInfoWrapper wrapperList = (NSSales_AuthorityLaneInfoWrapper)JSON.deserialize(rawResponse,NSSales_AuthorityLaneInfoWrapper.class);
     
        JSONGenerator gen = JSON.createGenerator(true);
    //rows
     gen.writeStartObject();     
     gen.writeFieldName('rows');
     gen.writeStartArray();
      system.debug(wrapperList.result.size()); 
     for(NSSales_AuthorityLaneInfoWrapper.result objt : wrapperList.result){
         gen.writeStartObject();
         gen.writeFieldName('vals1');
         gen.writeStartArray();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.laneID != null ? objt.laneID : '');
         gen.writeStringField('cssClass1', NSSales_ParsingConstants.H_FIELDS);
         gen.writeEndObject();
         //for(integer i = 0; i < wrapperList.result.size(); i++){
         gen.writeStartObject();
         gen.writeStringField('val1', objt.stcc != null ? objt.stcc : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.stccGrp != null ? objt.stccGrp : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         
         gen.writeStartObject();
         gen.writeObjectField('val1', objt.originRoad !=null ?objt.originRoad : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.originCity != null ? objt.originCity : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.originState != null ? objt.originState : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.originHandlingLine !=null ?objt.originHandlingLine : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.originGrpNumber != null ? objt.originGrpNumber : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.originGrpCity != null ? objt.originGrpCity : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.originGrpState != null ? objt.originGrpState : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.destinRoad != null ? objt.destinRoad : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.destinCity != null ? objt.destinCity : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.destinState != null ? objt.destinState : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.destinHandlingLine != null ? objt.destinHandlingLine : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.destinGrpNumber != null ? objt.destinGrpNumber : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.destinGrpCity != null ? objt.destinGrpCity : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.destinGrpState != null ? objt.destinGrpState : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject(); 
         
         gen.writeStartObject();
         gen.writeStringField('val1', objt.route != null ? objt.route : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject(); 
         gen.writeStartObject();
         gen.writeStringField('val1', objt.carOwnership != null ? objt.carOwnership : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.basis != null ? objt.basis : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.newRate != null ? objt.newRate : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.newNsFactor != null ? objt.newNsFactor : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.expiringRate != null ? objt.expiringRate : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.expiringNsFactor != null ? objt.expiringNsFactor : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.thCarloads != null ? objt.thCarloads : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.thNsRevenue != null ? objt.thNsRevenue : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.thTotalRevenue != null ? objt.thTotalRevenue : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.thTons != null ? objt.thTons : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.epCarloads != null ? objt.epCarloads : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.epTotalRevenue != null ? objt.epTotalRevenue : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.epTons != null ? objt.epTons : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.epTotalCost != null ? objt.epTotalCost : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.epEquipmentCost != null ? objt.epEquipmentCost : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.epDaysOnline != null ? objt.epDaysOnline : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.epLoadedMiles != null ? objt.epLoadedMiles : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('val1', objt.alkFuelMiles != null ? objt.alkFuelMiles : '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         
         //}
         gen.writeEndArray();
         gen.writeEndObject();
        
       }
        
      gen.writeEndArray();  
      gen.writeFieldName('headers');
       gen.writeStartArray();
        gen.writeStartObject();
         gen.writeStringField('title1', 'LaneID');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', NSSales_ParsingConstants.H_FIELDS);
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'STCC');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        
        gen.writeStartObject();
         gen.writeStringField('title1', 'STCC GROUP');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();

         gen.writeStartObject();
         gen.writeStringField('title1', 'O Rd');
         gen.writeBooleanField('isSortable', false);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'O City');
         gen.writeBooleanField('isSortable', false);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'O St');
         gen.writeBooleanField('isSortable', false);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'O HL');
         gen.writeBooleanField('isSortable', false);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'O GRP NUM');
         gen.writeBooleanField('isSortable', false);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'O GRP CITY');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'O GRP ST');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'D RD');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'D CITY');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'D ST');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'D HL');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'D GRP NUM');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         gen.writeStartObject();
         gen.writeStringField('title1', 'D GRP CITY');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
         
         gen.writeStartObject();
         gen.writeStringField('title1', 'D GRP ST');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        
         gen.writeStartObject();
         gen.writeStringField('title1', 'ROUTE');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'CAR OWNER');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'BASIS');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'NEW RATE');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'NEW NS FACTOR');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EXPIRING RATE');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EXPIRING NS FACTOR');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'TH CARLOADS');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'TH NS REV');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'TH TOTAL REV');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'TH TONS');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EP CARLOADS');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EP TOTAL REV');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EP TONS');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EP TOTAL COST');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EP EQUIP COST');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EP DAYS ONLINE');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'EP LOADED MILES');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();
        gen.writeStartObject();
         gen.writeStringField('title1', 'ALK FUEL MILES');
         gen.writeBooleanField('isSortable', true);
         gen.writeStringField('dataType', '');
         gen.writeStringField('cssClass1', '');
         gen.writeEndObject();

      gen.writeEndArray();
      gen.writeEndObject();
        
       String processedResponse = gen.getAsString();
      system.debug('processedResponse' +processedResponse); 
               return processedResponse; 

        }
}